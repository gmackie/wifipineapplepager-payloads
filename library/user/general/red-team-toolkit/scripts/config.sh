#!/bin/bash
# Engagement Configuration
# Edit these values at the start of each engagement

# === ENGAGEMENT IDENTITY ===
ENGAGEMENT_NAME="${ENGAGEMENT_NAME:-default}"

# === SCOPE CONTROLS ===
TARGET_NETWORK="${TARGET_NETWORK:-192.168.1.0/24}"
EXCLUDE_IPS="${EXCLUDE_IPS:-}"
OT_NETWORK="${OT_NETWORK:-}"

# === SAFETY CONTROLS ===
SAFE_MODE="${SAFE_MODE:-1}"
PASSIVE_ONLY="${PASSIVE_ONLY:-0}"
MAX_DURATION_SEC="${MAX_DURATION_SEC:-300}"

# === WIFI SCOPE ===
CHANNEL_ALLOWLIST="${CHANNEL_ALLOWLIST:-1 6 11}"
BSSID_SCOPE="${BSSID_SCOPE:-}"

# === LAPTOP INTEGRATION ===
LAPTOP_ENABLED="${LAPTOP_ENABLED:-0}"
LAPTOP_HOST="${LAPTOP_HOST:-}"
LAPTOP_KEY="${LAPTOP_KEY:-/root/.ssh/id_rsa}"
LAPTOP_TOOLS_DIR="${LAPTOP_TOOLS_DIR:-/opt/tools}"
LAPTOP_RESULTS_DIR="${LAPTOP_RESULTS_DIR:-/tmp/pager-results}"

# === PATHS (computed) ===
TOOLKIT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
ARTIFACT_DIR="${TOOLKIT_DIR}/artifacts/${ENGAGEMENT_NAME}"
LOG_DIR="${TOOLKIT_DIR}/logs/${ENGAGEMENT_NAME}"

# Export for subshells
export ENGAGEMENT_NAME TARGET_NETWORK EXCLUDE_IPS OT_NETWORK
export SAFE_MODE PASSIVE_ONLY MAX_DURATION_SEC
export CHANNEL_ALLOWLIST BSSID_SCOPE
export LAPTOP_ENABLED LAPTOP_HOST LAPTOP_KEY LAPTOP_TOOLS_DIR LAPTOP_RESULTS_DIR
export TOOLKIT_DIR ARTIFACT_DIR LOG_DIR
